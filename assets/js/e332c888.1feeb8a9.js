"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[205],{3247:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Backend-Setup","title":"Backend Setup Guide","description":"This guide covers how to set up the backend infrastructure for Let\'s Stream V2.0.","source":"@site/../wiki/Backend-Setup.md","sourceDirName":".","slug":"/Backend-Setup","permalink":"/letsstream2/Backend-Setup","draft":false,"unlisted":false,"editUrl":"https://github.com/chintan992/letsstream2/edit/main/wiki/../wiki/Backend-Setup.md","tags":[],"version":"current","frontMatter":{},"sidebar":"wikiSidebar","previous":{"title":"API Reference","permalink":"/letsstream2/API-Reference"},"next":{"title":"Contributing Guide","permalink":"/letsstream2/Contributing-Guide"}}');var r=i(4848),s=i(8453);const l={},c="Backend Setup Guide",a={},d=[{value:"Firebase Setup",id:"firebase-setup",level:2},{value:"1. Create Firebase Project",id:"1-create-firebase-project",level:3},{value:"2. Set Up Authentication",id:"2-set-up-authentication",level:3},{value:"3. Configure Firestore",id:"3-configure-firestore",level:3},{value:"4. Get Configuration Keys",id:"4-get-configuration-keys",level:3},{value:"Collection Structure",id:"collection-structure",level:2},{value:"userPreferences Collection",id:"userpreferences-collection",level:3},{value:"watchHistory Collection",id:"watchhistory-collection",level:3},{value:"favorites Collection",id:"favorites-collection",level:3},{value:"watchlist Collection",id:"watchlist-collection",level:3},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"backend-setup-guide",children:"Backend Setup Guide"})}),"\n",(0,r.jsx)(n.p,{children:"This guide covers how to set up the backend infrastructure for Let's Stream V2.0."}),"\n",(0,r.jsx)(n.h2,{id:"firebase-setup",children:"Firebase Setup"}),"\n",(0,r.jsx)(n.h3,{id:"1-create-firebase-project",children:"1. Create Firebase Project"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.a,{href:"https://console.firebase.google.com/",children:"Firebase Console"})]}),"\n",(0,r.jsx)(n.li,{children:'Click "Add Project"'}),"\n",(0,r.jsx)(n.li,{children:"Enter project name and follow setup wizard"}),"\n",(0,r.jsx)(n.li,{children:"Enable Google Analytics (recommended)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-set-up-authentication",children:"2. Set Up Authentication"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"In Firebase Console, go to Authentication > Sign-in method"}),"\n",(0,r.jsxs)(n.li,{children:["Enable the following providers:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Email/Password"}),"\n",(0,r.jsx)(n.li,{children:"Google Sign-in"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Configure OAuth consent screen if required"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-configure-firestore",children:"3. Configure Firestore"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to Firestore Database"}),"\n",(0,r.jsx)(n.li,{children:"Create database in your preferred region"}),"\n",(0,r.jsx)(n.li,{children:"Start in production mode"}),"\n",(0,r.jsx)(n.li,{children:"Apply the following security rules:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Helper functions\n    function isAuthenticated() {\n      return request.auth != null;\n    }\n    \n    function isOwner(userId) {\n      return isAuthenticated() && request.auth.uid == userId;\n    }\n\n    // User preferences\n    match /userPreferences/{userId} {\n      allow read, write: if isOwner(userId);\n    }\n    \n    // Watch history\n    match /watchHistory/{documentId} {\n      allow read: if isAuthenticated() && resource.data.user_id == request.auth.uid;\n      allow create: if isAuthenticated() && request.resource.data.user_id == request.auth.uid;\n      allow update, delete: if isAuthenticated() && resource.data.user_id == request.auth.uid;\n    }\n    \n    // Favorites\n    match /favorites/{documentId} {\n      allow read: if isAuthenticated() && resource.data.user_id == request.auth.uid;\n      allow create: if isAuthenticated() && request.resource.data.user_id == request.auth.uid;\n      allow update, delete: if isAuthenticated() && resource.data.user_id == request.auth.uid;\n    }\n    \n    // Watchlist\n    match /watchlist/{documentId} {\n      allow read: if isAuthenticated() && resource.data.user_id == request.auth.uid;\n      allow create: if isAuthenticated() && request.resource.data.user_id == request.auth.uid;\n      allow update, delete: if isAuthenticated() && resource.data.user_id == request.auth.uid;\n    }\n\n    // Default deny\n    match /{document=**} {\n      allow read, write: if false;\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-get-configuration-keys",children:"4. Get Configuration Keys"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Go to Project Settings > General"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:'Scroll to "Your apps" section'}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Click web platform (\\u003c/\\u003e)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Register app and get configuration"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Copy configuration values to your ",(0,r.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"VITE_FIREBASE_API_KEY=your_api_key\nVITE_FIREBASE_AUTH_DOMAIN=your_auth_domain\nVITE_FIREBASE_PROJECT_ID=your_project_id\nVITE_FIREBASE_STORAGE_BUCKET=your_storage_bucket\nVITE_FIREBASE_MESSAGING_SENDER_ID=your_messaging_sender_id\nVITE_FIREBASE_APP_ID=your_app_id\nVITE_FIREBASE_MEASUREMENT_ID=your_measurement_id\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"collection-structure",children:"Collection Structure"}),"\n",(0,r.jsx)(n.h3,{id:"userpreferences-collection",children:"userPreferences Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"{\n  user_id: string,\n  isWatchHistoryEnabled: boolean,\n  accentColor: string,\n  created_at: timestamp,\n  updated_at: timestamp\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"watchhistory-collection",children:"watchHistory Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"{\n  user_id: string,\n  media_id: string,\n  media_type: 'movie' | 'tv',\n  title: string,\n  poster_path: string,\n  watched_at: timestamp,\n  progress: number // Playback progress in seconds\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"favorites-collection",children:"favorites Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"{\n  user_id: string,\n  media_id: string,\n  media_type: 'movie' | 'tv',\n  title: string,\n  poster_path: string,\n  added_at: timestamp\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"watchlist-collection",children:"watchlist Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"{\n  user_id: string,\n  media_id: string,\n  media_type: 'movie' | 'tv',\n  title: string,\n  poster_path: string,\n  added_at: timestamp\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,r.jsx)(n.p,{children:"The project includes built-in rate limiting for API calls. Configure the limits in:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"src/utils/firestore-rate-limiter.ts"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"src/utils/rate-limiter.ts"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"Implement error tracking:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Set up Firebase Crashlytics"}),"\n",(0,r.jsx)(n.li,{children:"Configure error boundaries in React"}),"\n",(0,r.jsx)(n.li,{children:"Monitor Firestore quota usage"}),"\n",(0,r.jsx)(n.li,{children:"Set up alerts for authentication issues"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Authentication"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enable email verification"}),"\n",(0,r.jsx)(n.li,{children:"Set password requirements"}),"\n",(0,r.jsx)(n.li,{children:"Configure OAuth properly"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Firestore"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use security rules"}),"\n",(0,r.jsx)(n.li,{children:"Implement data validation"}),"\n",(0,r.jsx)(n.li,{children:"Set up backups"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"General"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enable Firebase App Check"}),"\n",(0,r.jsx)(n.li,{children:"Configure CORS policies"}),"\n",(0,r.jsx)(n.li,{children:"Set up proper authentication domains"}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var t=i(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);